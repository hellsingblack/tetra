<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Tetra JS | MVC</title>
    <link rel="icon" href="/tetra/public/img/favicon.ico" />
    <link rel="stylesheet" href="/tetra/public/tetra-ui/css/tetra-ui-doc.min.css" />
    <link rel="stylesheet" href="/tetra/public/css/main.css" />
</head>

<body>
    <div class="wrap">
        <div class="header">
            <div class="fluid-container">
                <h1 class="fl">Powered by <i class="vicon">o</i>
                    <a href="/tetra" class="logo">Tetra JS</a>
                </h1>
                <a href="https://github.com/viadeo/tetra" class="fr mts btn btn-default btn-large github">
                    Tetra JS on GitHub
                </a>
            </div>
        </div>
        <div class="content fluid-container">
            <div class="gr inner-content ptl">
                <div class="gu gu-1of4">
                                    <div class="sidebar">
                    <ul class="nav-stacked">
                        <li class="h4 man">
                            <a class="paxs" href="/tetra/doc/about.html">About</a>
                        </li>
                        <li class="h4 man">
                            <a class="paxs" href="/tetra/doc/view.html">View</a>
                        </li>
                        <li class="h4 man">
                            <a class="paxs" href="/tetra/doc/controller.html">Controller</a>
                        <li class="h4 man">
                            <a class="paxs" href="/tetra/doc/model.html">Model</a>
                        </li>
                        <li class="h4 man">
                            <a class="paxs" href="/tetra/doc/orm.html">ORM</a>
                        </li>
                        <!-- <li class="h4">
                            <a href="/tetra/doc/templating.html">Templating</a>
                        </li> -->
                        <li class="h4 man">
                            <a class="paxs" href="/tetra/doc/bootnode.html">Bootnode</a>
                        </li>
                        <li class="h4 man">
                            <a class="paxs" href="/tetra/doc/debugger.html">Debugger</a>
                        </li>
                    </ul>
                </div>
                </div>
                <div class="gu gu-last">
                    <div class="panel-docs pll">
                    <p class="h3">Define a controller</p>

<div class="code">
<pre>
tetra.controller.register(name, Object)
</pre>
</div>

<p class="description">
    <b>name</b> The name of the controller. It must be the same as the file name. If you call your controller likeCtrl, the file must be called likeCtrl.ctrl.js.<br>
</p>

<p class="description">
    <b>Object</b> This object configures the controller, and describes view and model listeners and notifiers. A more detailed definition follows.
</p>

<p class="subtitle">Controller configuration</p>

<div class="code">
<pre>
{
    scope : 'scope name',
    use : ['Mymodel', 'OtherModel', ...],
    constr : function
}
</pre>
</div>

<p class="subtitle">Parameters</p>

<p class="description">
    <b>scope</b> The scope acts as a namespace for messages sent by the controller to the view. <br>
</p>
<p class="description">
    <b>use</b> An Array of models used by the controller. If the nested model is a global one, prefix its name with <b>g/</b>, use: ['g/name']
</p>
<p class="description">
    <b>constr</b>  a function returning a controller's public API
</p>

<p class="subtitle">Contructor</p>

<div class="code">
<pre>
constr : function(me, app, page, orm) {
  return {
    events : {...},
    methods : {...}
  };
}
</pre>
</div>

<p class="description">
    <b>me</b> similar to 'this' in OO JavaScript, this variable gives you access to all attributes of the controller object itself and allows you to define your own functions and attributes<br>
</p>
<p class="description">
    <b>app</b> the communication pipe to all views in the scope.<br>
</p>
<p class="description">
    <b>page</b> the communication pipe to all controllers.<br>
</p>
<p class="description">
    <b>orm</b> object relational model of the core framework. it allows you to create, retrieve, update or delete data objects and synchronize data with the server. It is a total abstraction of ajax calls.
</p>

<p class="subtitle">Events</p>

<div class="code">
<pre>
events : {
   model : {
      'MyModel' : {
          'append' : function(obj){...},
          'save' : function(obj){...},
          'saved' : function(obj){...},
           ...
       },
       ...
   },
   view : {
      'message' : function(data){...},
       ...
   },
   controller : {
      'message from page.notify' : function(data){...},
       ...
   }
}
</pre>
</div>

<p class="description">events: callbacks triggered by a model action or a message sent from the view</p>

<p class="description">
    Here is the list of all models change messages :
</p>
<p class="description">
    <b>call</b> invoked before each ajax call.<br>
</p>
<p class="description">
    <b>complete</b> invoked after each ajax call.<br>
</p>
<p class="description">
    <b>create</b> invoked after the creation of an object. Receives the created object as a parameter.<br>
</p>
<p class="description">
    <b>fetch</b> called before a fetch operation. Receives the conditions of the request.<br>
</p>
<p class="description">
    <b>append</b> called after a successful fetch. Receives the collection of results as a parameter.<br>
</p>
<p class="description">
    <b>save</b> invoked before a save call. Receives the updated object as a parameter.<br>
</p>
<p class="description">
    <b>saved</b> invoked after a save call. Receives the updated object as a parameter.<br>
</p>
<p class="description">
    <b>delete</b> called before a delete call. Receives the updated object as a parameter.<br>
</p>
<p class="description">
    <b>deleted</b> called after a successful delete. Receives the updated object as a parameter.<br>
</p>
<p class="description">
    <b>reset</b> invoked before a reset. Receives the collection of objects as a parameter.<br>
</p>
<p class="description">
    <b>reseted</b> invoked after a successful reset call. Receives the name of the model as a parameter.<br>
</p>
<p class="description">
    <b>invalid</b> callback invoked when an object update fails due to invalid attributes. Receives the list of incorrect attr and the objinstance as parameters.<br>
</p>
<p class="description">
    <b>alert</b> callback invoked when a request returns a 200 response, but with with alerts (i.e. validation alerts). Receives alert type (save, fetch, ...), alert object, conditions of the call or object as parameters.<br>
</p>
<p class="description">
    <b>error</b> callback invoked for every failed call (!=200). Receives error type (save, fetch, ...), error code (500, 404, ...), error object, conditions of the call or object as parameters.
</p>

Sample code ...@








                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="copy fluid-container">
            <p>©2013 APVO CORP.</p>
        </div>
    </div>
    <script src="/tetra/public/js/jquery-1.10.2.min.js"></script>
    <script src="/tetra/public/js/main.js"></script>
</body>
</html>